# See schema in factory_schema_config_env.py for descriptions of common parameters.

defaults:
    - FactoryBaseTactile
    - _self_
    - /factory_schema_config_env

sim:
    disable_kuka_collisions: False
    disable_socket_collisions: False
    disable_plug_collisions: False

external_cam:
    x_init: 0.72
    y_init: 0.0
    z_init: 0.16
    roll_init: 0
    pitch_init: 20
    yaw_init: 180

    pos_noise: 0.01
    rot_noise: 1

env:
    env_name: 'FactoryEnvInsertionTactile'
    aggregate_mode: True

    desired_subassemblies: [
#                            'small_triangle',
#                            'triangle',
#                            'red_round_peg_1_5in',
                            'yellow_round_peg_2in',
#                            'rectangular_peg_hole_32mm_loose',
#                            'square_peg_hole_32mm_loose',
#                             'round_peg_hole_16mm_loose',
#                             'rectangular_peg_hole_16mm_loose',
    ]

    plug_lateral_offset: 0.1  # Y-axis offset of plug before initial reset to prevent initial interpenetration with socket
    plug_friction: 0.99

# Domain randomization params
randomize:

    domain_randomize: True
    randomization_params:
        # making frequency max_episode_length - 1, for randomization on every episode.
        frequency: 499   # Define how many simulation steps between generating new randomization
        observations:
            range: [ 0, .002 ] # range for the white noise
            range_correlated: [ 0, .000 ] # range for correlated noise, refreshed with freq `frequency`
            operation: "additive"
            distribution: "gaussian"
            # schedule: "linear"   # "constant" is to turn on noise after `schedule_steps` num steps
            # schedule_steps: 40000
        actions:
            range: [ 0., .02 ]
            range_correlated: [ 0, .01 ] # range for correlated noise, refreshed with freq `frequency`
            operation: "additive"
            distribution: "gaussian"
            # schedule: "linear"  # "linear" will linearly interpolate between no rand and max rand
            # schedule_steps: 40000
        sim_params:
            gravity:
                range: [ 0, 0.4 ]
                operation: "additive"
                distribution: "gaussian"
                # schedule: "linear"  # "linear" will linearly interpolate between no rand and max rand
                # schedule_steps: 40000
        actor_params:
            kuka:
                color: True
                dof_properties:
                    lower:
                        range: [ 0, 0.01 ]
                        operation: "additive"
                        distribution: "gaussian"
                        # schedule: "linear"  # "linear" will scale the current random sample by `min(current num steps, schedule_steps) / schedule_steps`
                        # schedule_steps: 30000
                    upper:
                        range: [ 0, 0.01 ]
                        operation: "additive"
                        distribution: "gaussian"
                        # schedule: "linear"  # "linear" will scale the current random sample by `min(current num steps, schedule_steps) / schedule_steps`
                        # schedule_steps: 30000
                rigid_shape_properties:
                    friction:
                        num_buckets: 250
                        range: [0.7, 1.3] # 1 1
                        operation: "scaling"
                        distribution: "uniform"
            plug:
                scale:
                    range: [ 0.9, 1.0 ]
                    operation: "scaling"
                    distribution: "uniform"
                    setup_only: True # Property will only be randomized once before simulation is started. See Domain Randomization Documentation for more info.
                    # schedule: "linear"  # "linear" will scale the current random sample by ``min(current num steps, schedule_steps) / schedule_steps`
                    # schedule_steps: 30000
#                 rigid_body_properties:
#                     mass:
#                         range: [ 0.1, 0.1 ]
#                         operation: "scaling"
#                         distribution: "uniform"
#                         setup_only: True # Property will only be randomized once before simulation is started. See Domain Randomization Documentation for more info.
#                         # schedule: "linear"  # "linear" will scale the current random sample by ``min(current num steps, schedule_steps) / schedule_steps`
#                         # schedule_steps: 30000
                rigid_shape_properties:
                    friction:
                        num_buckets: 250
                        range: [ 0.65, 1.3 ]
                        operation: "scaling"
                        distribution: "uniform"

                        # schedule: "linear"  # "linear" will scale the current random sample by `min(current num steps, schedule_steps) / schedule_steps`
                        # schedule_steps: 30000
                rigid_body_properties:
                    mass:
                        range: [ 0.7, 1.3 ]
                        operation: "scaling"
                        distribution: "uniform"
                        setup_only: True # Property will only be randomized once before simulation is started. See Domain Randomization Documentation for more info.
                        # schedule: "linear"  # "linear" will scale the current random sample by ``min(current num steps, schedule_steps) / schedule_steps`
                        # schedule_steps: 30000
            table:
                rigid_shape_properties:
                    friction:
                        num_buckets: 250
                        range: [ 0.0, 0.0 ]
                        operation: "scaling"
                        distribution: "uniform"

            socket:
                rigid_shape_properties:
                    friction:
                        num_buckets: 250
                        range: [ 0.5, 1.3 ]
                        operation: "scaling"
                        distribution: "uniform"
#                scale:
#                    range: [ 1.0, 1.2 ]
#                    operation: "scaling"
#                    distribution: "uniform"
#                    setup_only: True # Property will only be randomized once before simulation is started. See Domain Randomization Documentation for more info.